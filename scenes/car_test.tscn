[gd_scene load_steps=11 format=3 uid="uid://ckmh7kptl5eos"]

[ext_resource type="PackedScene" uid="uid://dxnvsoi1pvfeu" path="res://scenes/track.tscn" id="1_gm8sd"]
[ext_resource type="PackedScene" uid="uid://c3nglrrrb2y5w" path="res://scenes/player.tscn" id="2_o01lw"]
[ext_resource type="PackedScene" uid="uid://dy1c420tme5eu" path="res://scenes/state_machine.tscn" id="3_y2m84"]
[ext_resource type="Script" uid="uid://uwr30nkdol3l" path="res://states/WalkingIdleState.gd" id="4_j7oku"]
[ext_resource type="Script" uid="uid://c4g4l7ek2yhog" path="res://states/WalkingState.gd" id="5_gaoq8"]
[ext_resource type="Script" uid="uid://cy3ysphmgbu08" path="res://states/DrivingState.gd" id="6_rf1x0"]
[ext_resource type="Script" uid="uid://cayn4lvq7m0vh" path="res://effects/SteeringEffect.gd" id="7_uu4pf"]
[ext_resource type="Script" uid="uid://iw57lii8266a" path="res://effects/ThrottleEffect.gd" id="8_wmo0b"]
[ext_resource type="PackedScene" uid="uid://dspuk2sfm2owv" path="res://scenes/player_car.tscn" id="9_a2053"]
[ext_resource type="Script" uid="uid://b1suabgnqoo66" path="res://effects/BrakeEffect.gd" id="9_o01lw"]

[node name="CarTest" type="Node3D"]

[node name="Demo" parent="." instance=ExtResource("1_gm8sd")]

[node name="Player" parent="." instance=ExtResource("2_o01lw")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 2.5991006)

[node name="StateMachine" parent="Player" node_paths=PackedStringArray("initial_state") instance=ExtResource("3_y2m84")]
initial_state = NodePath("Idle")
drunk_level = 5

[node name="Idle" type="Node" parent="Player/StateMachine" node_paths=PackedStringArray("player")]
script = ExtResource("4_j7oku")
player = NodePath("../..")
metadata/_custom_type_script = "uid://uwr30nkdol3l"

[node name="Walking" type="Node" parent="Player/StateMachine" node_paths=PackedStringArray("player")]
script = ExtResource("5_gaoq8")
player = NodePath("../..")
metadata/_custom_type_script = "uid://c4g4l7ek2yhog"

[node name="Driving" type="Node" parent="Player/StateMachine" node_paths=PackedStringArray("player_car", "player")]
script = ExtResource("6_rf1x0")
player_car = NodePath("../../../VehicleRigidBody")
player = NodePath("../..")
metadata/_custom_type_script = "uid://cy3ysphmgbu08"

[node name="SteeringEffect" type="Node" parent="Player/StateMachine/Driving" node_paths=PackedStringArray("car")]
script = ExtResource("7_uu4pf")
car = NodePath("../../../../VehicleRigidBody")
level = 3
metadata/_custom_type_script = "uid://cayn4lvq7m0vh"

[node name="ThrottleEffect" type="Node" parent="Player/StateMachine/Driving" node_paths=PackedStringArray("car")]
script = ExtResource("8_wmo0b")
car = NodePath("../../../../VehicleRigidBody")
level = 4
metadata/_custom_type_script = "uid://iw57lii8266a"

[node name="BrakeEffect" type="Node" parent="Player/StateMachine/Driving" node_paths=PackedStringArray("car")]
script = ExtResource("9_o01lw")
car = NodePath("../../../../VehicleRigidBody")
level = 5
metadata/_custom_type_script = "uid://b1suabgnqoo66"

[node name="VehicleRigidBody" parent="." instance=ExtResource("9_a2053")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.5077957, 0)

[connection signal="car_entered" from="VehicleRigidBody" to="Player/StateMachine/Idle" method="on_car_entered"]
[connection signal="car_exited" from="VehicleRigidBody" to="Player/StateMachine/Driving" method="on_car_exited"]
